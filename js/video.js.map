{"version":3,"sources":["video.js"],"names":["KeyName","ESCAPE","ESC","setPlayHandler","link","document","querySelector","setupVideo","id","addEventListener","createElement","container","innerHTML","concat","iframe","outerHTML","closePopup","onCloseButtonClick","onEscKeyDown","appendChild","removeEventListener","evt","preventDefault","key","parseURL","remove","createIframe","setAttribute","classList","generateURL","add"],"mappings":"AAAA,IAAMA,QAAU,CACdC,OAAM,SACNC,IAAG,OAGCC,eAAiB,WACrB,IAAIC,EAAOC,SAASC,cAATD,gBADbE,WAAAH,IAOMI,WAAa,SAAEJ,GAEnBA,IAAII,EAACC,SAAAA,GAGHL,EAAAK,iBAAA,QAA2BC,SAAAA,GAC3BC,EAAAA,iBAGAA,IAAAA,EAAUC,SAAVF,cAAUE,OAKVD,EAAUL,UAAAA,IAAVK,SACAN,EAASI,aAAkBD,GAb7BG,EAAAC,UAAA,+DAAAC,OAHFC,EAAAC,UAGE,6IAqBAC,EAAUV,cAAA,kBAAAG,iBAAA,QAAAQ,oBAFZZ,SAAAI,iBAAA,UAAAS,cAKMA,SAAAA,KAAYC,YAAZD,MAIFb,mBAASe,SAAAA,GACVC,EAAAC,iBALHN,cAQmBE,aAAeZ,SAAfY,EAAeZ,GAAlCe,EAAAE,MAAAvB,QAAAC,QAAAoB,EAAAE,MAAAvB,QAAAE,MANImB,EAAIC,iBAQFE,aACJnB,SAAUe,oBAAG,UAAAF,KADfF,WAAA,WAAA,OAAAX,SAAAC,cAAA,UAAAmB,UAQMC,SAAY,SAAGtB,GAMnBU,OAHOa,EAAAA,KACAA,MAHMtB,6CAKNuB,IANHF,aAAe,SAAElB,GAWvB,IAAMqB,EAAWxB,SAAGK,cAAH,UAHf,OAMAI,EAAOa,aAAP,kBAAA,IAHFb,EAAAa,aAAA,QAAA,YANEb,EAAOa,aAAP,MAA4BE,YAAarB,IAY3CL,EAAAA,UAAc2B,IAAd3B,gBATSW,GAGHe,YAAc,SAAErB,GAGpB,MAAO,iCAAmCA,EAFjC,gCAKXL","file":"video.js","sourcesContent":["const KeyName = {\n  ESCAPE: `Escape`,\n  ESC: `Esc`\n};\n\nconst setPlayHandler = () => {\n  let link = document.querySelector( `.video__link` );\n\n  setupVideo( link );\n};\n\nconst setupVideo = ( link ) => {\n  let id = parseURL( link );\n\n  link.addEventListener( `click`, ( evt ) => {\n    evt.preventDefault();\n\n    const container = document.createElement( `div` );\n    container.classList.add( `popup` );\n    const iframe = createIframe( id );\n\n    container.innerHTML = `<div class=\"popup__wrapper\">\n                              ${iframe.outerHTML}\n                              <button class=\"popup__button\" type=\"button\" aria-label=\"Close popup\">\n                            </div>`;\n\n    container.querySelector( '.popup__button' ).addEventListener( 'click', onCloseButtonClick );\n    document.addEventListener( 'keydown', onEscKeyDown );\n\n    document.body.appendChild( container );\n  } );\n};\n\nconst onCloseButtonClick = ( evt ) => {\n  evt.preventDefault();\n  closePopup();\n};\n\nconst onEscKeyDown = ( evt ) => {\n  if ( evt.key === KeyName.ESCAPE || evt.key === KeyName.ESC ) {\n    evt.preventDefault();\n    closePopup();\n    document.removeEventListener( 'keydown', onEscKeyDown );\n  }\n};\n\nconst closePopup = () => document.querySelector( '.popup' ).remove();\n\nconst parseURL = ( link ) => {\n  let regexp = /https:\\/\\/youtu\\.be\\/([a-zA-Z0-9_-]+)\\/*/i;\n  let url = link.href;\n  let match = url.match( regexp );\n\n  return match[ 1 ];\n};\n\nconst createIframe = ( id ) => {\n  let iframe = document.createElement( `iframe` );\n\n  iframe.setAttribute( `allowfullscreen`, `` );\n  iframe.setAttribute( `allow`, `autoplay` );\n  iframe.setAttribute( `src`, generateURL( id ) );\n  iframe.classList.add( `popup__video` );\n\n  return iframe;\n};\n\nconst generateURL = ( id ) => {\n  let query = `?rel=0&showinfo=0&autoplay=1`;\n\n  return `https://www.youtube.com/embed/` + id + query;\n};\n\nsetPlayHandler();\n"]}